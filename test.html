<html>
<head>
<title>Basic Encrev2 Plugin Test</title>
</head>
<body>
  <object id="publish" type="application/x-encrev2-plugin" width=320 height=240 text="Encre Video Conf">Unable to load plugin </object>
  <!-- <object id="receive" type="application/x-encrev2-plugin" width=320 height=240 text="Encre Video Conf">Unable to load plugin </object> -->

  <script language=JavaScript>
    function get_publish()
    {
	return document.getElementById('publish');
    }

    function stream()
    {
	var p = get_publish();
	<!-- p.runtimeOption = ":v4l2-caching=500"; -->
	<!-- p.runtimeOption = ":sout-x264-tune=zerolatency"; -->
	<!-- p.runtimeOption = ":sout-x264-preset=veryfast"; -->
    	<!-- p.initStream("toto"); -->
	p.setOptions = ":sout=#transcode{vcodec=h264,vb=800,scale=1,acodec=mp4a,ab=128,channels=2,samplerate=44100}:smem{mux=ts}:sout=#duplicate{dst=display}";
	p.stream();
    }

    function  start_plugin()
    {
	// Set here specific start up option
     	get_publish().start();
	<!-- get_publish().connect('localhost','4242'); -->

	var node = document.getElementById("start");
	node.style.display="none";
	node = document.getElementById("button_list");
	node.style.display="block";
    }
  </script>

  <input type="button" id="start" value="START !" OnClick="start_plugin()"/>

  <form id="button_list" style="display:none">
    <input type="button" value="Stream..." OnClick="stream()"/>
    <input type="button" value="Play..." OnClick="get_publish().play('toto')"/>
    <input type="button" value="Stop !" OnClick="get_publish().stop()"/>
  </form>

</body>
</html>
